<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.0.0"/>
    <title>xtquant.xtbson.bson36.codec_options API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent }nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../bson36.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;xtquant.xtbson.bson36</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#TypeEncoder">TypeEncoder</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#TypeEncoder.python_type">python_type</a>
                        </li>
                        <li>
                                <a class="function" href="#TypeEncoder.transform_python">transform_python</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#TypeDecoder">TypeDecoder</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#TypeDecoder.bson_type">bson_type</a>
                        </li>
                        <li>
                                <a class="function" href="#TypeDecoder.transform_bson">transform_bson</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#TypeCodec">TypeCodec</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#TypeRegistry">TypeRegistry</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#TypeRegistry.__init__">TypeRegistry</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#CodecOptions">CodecOptions</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#CodecOptions.with_options">with_options</a>
                        </li>
                        <li>
                                <a class="variable" href="#CodecOptions.document_class">document_class</a>
                        </li>
                        <li>
                                <a class="variable" href="#CodecOptions.tz_aware">tz_aware</a>
                        </li>
                        <li>
                                <a class="variable" href="#CodecOptions.uuid_representation">uuid_representation</a>
                        </li>
                        <li>
                                <a class="variable" href="#CodecOptions.unicode_decode_error_handler">unicode_decode_error_handler</a>
                        </li>
                        <li>
                                <a class="variable" href="#CodecOptions.tzinfo">tzinfo</a>
                        </li>
                        <li>
                                <a class="variable" href="#CodecOptions.type_registry">type_registry</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="variable" href="#DEFAULT_CODEC_OPTIONS">DEFAULT_CODEC_OPTIONS</a>
            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../../xtquant.html">xtquant</a><wbr>.<a href="./../../xtbson.html">xtbson</a><wbr>.<a href="./../bson36.html">bson36</a><wbr>.codec_options    </h1>

                        <div class="docstring"><p>Tools for specifying BSON codec options.</p>
</div>

                        <input id="mod-codec_options-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-codec_options-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="c1"># Copyright 2014-present MongoDB, Inc.</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="c1">#</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="c1"># you may not use this file except in compliance with the License.</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="c1"># You may obtain a copy of the License at</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="c1">#</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="c1"># http://www.apache.org/licenses/LICENSE-2.0</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="c1">#</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a><span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="c1"># See the License for the specific language governing permissions and</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="c1"># limitations under the License.</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="sd">&quot;&quot;&quot;Tools for specifying BSON codec options.&quot;&quot;&quot;</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="kn">import</span> <span class="nn">abc</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="kn">import</span> <span class="nn">datetime</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="kn">import</span> <span class="nn">warnings</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">MutableMapping</span> <span class="k">as</span> <span class="n">_MutableMapping</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="kn">from</span> <span class="nn">.binary</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a>    <span class="n">ALL_UUID_REPRESENTATIONS</span><span class="p">,</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a>    <span class="n">UUID_REPRESENTATION_NAMES</span><span class="p">,</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a>    <span class="n">UuidRepresentation</span><span class="p">,</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="p">)</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="k">def</span> <span class="nf">_abstractproperty</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a>    <span class="k">return</span> <span class="nb">property</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">abstractmethod</span><span class="p">(</span><span class="n">func</span><span class="p">))</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a><span class="n">_RAW_BSON_DOCUMENT_MARKER</span> <span class="o">=</span> <span class="mi">101</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a><span class="k">def</span> <span class="nf">_raw_document_class</span><span class="p">(</span><span class="n">document_class</span><span class="p">):</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Determine if a document_class is a RawBSONDocument class.&quot;&quot;&quot;</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a>    <span class="n">marker</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">document_class</span><span class="p">,</span> <span class="s2">&quot;_type_marker&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a>    <span class="k">return</span> <span class="n">marker</span> <span class="o">==</span> <span class="n">_RAW_BSON_DOCUMENT_MARKER</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a><span class="k">class</span> <span class="nc">TypeEncoder</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for defining type codec classes which describe how a</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="sd">    custom type can be transformed to one of the types BSON understands.</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a><span class="sd">    Codec classes must implement the ``python_type`` attribute, and the</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a><span class="sd">    ``transform_python`` method to support encoding.</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a><span class="sd">    See :ref:`custom-type-type-codec` documentation for an example.</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a>    <span class="nd">@_abstractproperty</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a>    <span class="k">def</span> <span class="nf">python_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The Python type to be converted into something serializable.&quot;&quot;&quot;</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a>        <span class="k">pass</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a>    <span class="k">def</span> <span class="nf">transform_python</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the given Python object into something serializable.&quot;&quot;&quot;</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a>        <span class="k">pass</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a><span class="k">class</span> <span class="nc">TypeDecoder</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for defining type codec classes which describe how a</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="sd">    BSON type can be transformed to a custom type.</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="sd">    Codec classes must implement the ``bson_type`` attribute, and the</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a><span class="sd">    ``transform_bson`` method to support decoding.</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="sd">    See :ref:`custom-type-type-codec` documentation for an example.</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a>    <span class="nd">@_abstractproperty</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a>    <span class="k">def</span> <span class="nf">bson_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The BSON type to be converted into our own type.&quot;&quot;&quot;</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a>        <span class="k">pass</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a>    <span class="k">def</span> <span class="nf">transform_bson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the given BSON value into our own type.&quot;&quot;&quot;</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a>        <span class="k">pass</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a><span class="k">class</span> <span class="nc">TypeCodec</span><span class="p">(</span><span class="n">TypeEncoder</span><span class="p">,</span> <span class="n">TypeDecoder</span><span class="p">):</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for defining type codec classes which describe how a</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a><span class="sd">    custom type can be transformed to/from one of the types :mod:`bson`</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a><span class="sd">    can already encode/decode.</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a><span class="sd">    Codec classes must implement the ``python_type`` attribute, and the</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a><span class="sd">    ``transform_python`` method to support encoding, as well as the</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a><span class="sd">    ``bson_type`` attribute, and the ``transform_bson`` method to support</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a><span class="sd">    decoding.</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a><span class="sd">    See :ref:`custom-type-type-codec` documentation for an example.</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a>    <span class="k">pass</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a><span class="k">class</span> <span class="nc">TypeRegistry</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Encapsulates type codecs used in encoding and / or decoding BSON, as</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a><span class="sd">    well as the fallback encoder. Type registries cannot be modified after</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a><span class="sd">    instantiation.</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a><span class="sd">    ``TypeRegistry`` can be initialized with an iterable of type codecs, and</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a><span class="sd">    a callable for the fallback encoder::</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a><span class="sd">      &gt;&gt;&gt; from .codec_options import TypeRegistry</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a><span class="sd">      &gt;&gt;&gt; type_registry = TypeRegistry([Codec1, Codec2, Codec3, ...],</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a><span class="sd">      ...                              fallback_encoder)</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a><span class="sd">    See :ref:`custom-type-type-registry` documentation for an example.</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a><span class="sd">    :Parameters:</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a><span class="sd">      - `type_codecs` (optional): iterable of type codec instances. If</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a><span class="sd">        ``type_codecs`` contains multiple codecs that transform a single</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a><span class="sd">        python or BSON type, the transformation specified by the type codec</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a><span class="sd">        occurring last prevails. A TypeError will be raised if one or more</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a><span class="sd">        type codecs modify the encoding behavior of a built-in :mod:`bson`</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a><span class="sd">        type.</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a><span class="sd">      - `fallback_encoder` (optional): callable that accepts a single,</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a><span class="sd">        unencodable python value and transforms it into a type that</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a><span class="sd">        :mod:`bson` can encode. See :ref:`fallback-encoder-callable`</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a><span class="sd">        documentation for an example.</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">type_codecs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fallback_encoder</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__type_codecs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">type_codecs</span> <span class="ow">or</span> <span class="p">[])</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_fallback_encoder</span> <span class="o">=</span> <span class="n">fallback_encoder</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_encoder_map</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_decoder_map</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fallback_encoder</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">fallback_encoder</span><span class="p">):</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;fallback_encoder </span><span class="si">%r</span><span class="s2"> is not a callable&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fallback_encoder</span><span class="p">))</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>        <span class="k">for</span> <span class="n">codec</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__type_codecs</span><span class="p">:</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a>            <span class="n">is_valid_codec</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">TypeEncoder</span><span class="p">):</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_validate_type_encoder</span><span class="p">(</span><span class="n">codec</span><span class="p">)</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a>                <span class="n">is_valid_codec</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_encoder_map</span><span class="p">[</span><span class="n">codec</span><span class="o">.</span><span class="n">python_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">codec</span><span class="o">.</span><span class="n">transform_python</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">TypeDecoder</span><span class="p">):</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>                <span class="n">is_valid_codec</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_decoder_map</span><span class="p">[</span><span class="n">codec</span><span class="o">.</span><span class="n">bson_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">codec</span><span class="o">.</span><span class="n">transform_bson</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_valid_codec</span><span class="p">:</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>                    <span class="s2">&quot;Expected an instance of </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, or </span><span class="si">%s</span><span class="s2">, got </span><span class="si">%r</span><span class="s2"> instead&quot;</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>                    <span class="o">%</span> <span class="p">(</span><span class="n">TypeEncoder</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">TypeDecoder</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">TypeCodec</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">codec</span><span class="p">)</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a>                <span class="p">)</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a>    <span class="k">def</span> <span class="nf">_validate_type_encoder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">codec</span><span class="p">):</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a>        <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">_BUILT_IN_TYPES</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a>        <span class="k">for</span> <span class="n">pytype</span> <span class="ow">in</span> <span class="n">_BUILT_IN_TYPES</span><span class="p">:</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>            <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">codec</span><span class="o">.</span><span class="n">python_type</span><span class="p">,</span> <span class="n">pytype</span><span class="p">):</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>                <span class="n">err_msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>                    <span class="s2">&quot;TypeEncoders cannot change how built-in types are &quot;</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>                    <span class="s2">&quot;encoded (encoder </span><span class="si">%s</span><span class="s2"> transforms type </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">pytype</span><span class="p">)</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>                <span class="p">)</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(type_codecs=</span><span class="si">%r</span><span class="s2">, fallback_encoder=</span><span class="si">%r</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a>            <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__type_codecs</span><span class="p">,</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_fallback_encoder</span><span class="p">,</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>        <span class="p">)</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a>            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_decoder_map</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_decoder_map</span><span class="p">)</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a>            <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_encoder_map</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_encoder_map</span><span class="p">)</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a>            <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fallback_encoder</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_fallback_encoder</span><span class="p">)</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>        <span class="p">)</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a><span class="n">_options_base</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a>    <span class="s2">&quot;CodecOptions&quot;</span><span class="p">,</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a>    <span class="p">(</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a>        <span class="s2">&quot;document_class&quot;</span><span class="p">,</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a>        <span class="s2">&quot;tz_aware&quot;</span><span class="p">,</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a>        <span class="s2">&quot;uuid_representation&quot;</span><span class="p">,</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a>        <span class="s2">&quot;unicode_decode_error_handler&quot;</span><span class="p">,</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a>        <span class="s2">&quot;tzinfo&quot;</span><span class="p">,</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a>        <span class="s2">&quot;type_registry&quot;</span><span class="p">,</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a>    <span class="p">),</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a><span class="p">)</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a><span class="k">class</span> <span class="nc">CodecOptions</span><span class="p">(</span><span class="n">_options_base</span><span class="p">):</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Encapsulates options used encoding and / or decoding BSON.</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a><span class="sd">    The `document_class` option is used to define a custom type for use</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a><span class="sd">    decoding BSON documents. Access to the underlying raw BSON bytes for</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a><span class="sd">    a document is available using the :class:`~bson.raw_bson.RawBSONDocument`</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a><span class="sd">    type::</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a><span class="sd">      &gt;&gt;&gt; from .raw_bson import RawBSONDocument</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a><span class="sd">      &gt;&gt;&gt; from .codec_options import CodecOptions</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a><span class="sd">      &gt;&gt;&gt; codec_options = CodecOptions(document_class=RawBSONDocument)</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a><span class="sd">      &gt;&gt;&gt; coll = db.get_collection(&#39;test&#39;, codec_options=codec_options)</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a><span class="sd">      &gt;&gt;&gt; doc = coll.find_one()</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a><span class="sd">      &gt;&gt;&gt; doc.raw</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a><span class="sd">      &#39;\\x16\\x00\\x00\\x00\\x07_id\\x00[0\\x165\\x91\\x10\\xea\\x14\\xe8\\xc5\\x8b\\x93\\x00&#39;</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a><span class="sd">    The document class can be any type that inherits from</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a><span class="sd">    :class:`~collections.abc.MutableMapping`::</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a><span class="sd">      &gt;&gt;&gt; class AttributeDict(dict):</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a><span class="sd">      ...     # A dict that supports attribute access.</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a><span class="sd">      ...     def __getattr__(self, key):</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a><span class="sd">      ...         return self[key]</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a><span class="sd">      ...     def __setattr__(self, key, value):</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a><span class="sd">      ...         self[key] = value</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a><span class="sd">      ...</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a><span class="sd">      &gt;&gt;&gt; codec_options = CodecOptions(document_class=AttributeDict)</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a><span class="sd">      &gt;&gt;&gt; coll = db.get_collection(&#39;test&#39;, codec_options=codec_options)</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a><span class="sd">      &gt;&gt;&gt; doc = coll.find_one()</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a><span class="sd">      &gt;&gt;&gt; doc._id</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a><span class="sd">      ObjectId(&#39;5b3016359110ea14e8c58b93&#39;)</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a><span class="sd">    See :doc:`/examples/datetimes` for examples using the `tz_aware` and</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a><span class="sd">    `tzinfo` options.</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a><span class="sd">    See :doc:`examples/uuid` for examples using the `uuid_representation`</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a><span class="sd">    option.</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a><span class="sd">    :Parameters:</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a><span class="sd">      - `document_class`: BSON documents returned in queries will be decoded</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a><span class="sd">        to an instance of this class. Must be a subclass of</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a><span class="sd">        :class:`~collections.abc.MutableMapping`. Defaults to :class:`dict`.</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a><span class="sd">      - `tz_aware`: If ``True``, BSON datetimes will be decoded to timezone</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a><span class="sd">        aware instances of :class:`~datetime.datetime`. Otherwise they will be</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a><span class="sd">        naive. Defaults to ``False``.</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a><span class="sd">      - `uuid_representation`: The BSON representation to use when encoding</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a><span class="sd">        and decoding instances of :class:`~uuid.UUID`. Defaults to</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a><span class="sd">        :data:`~bson.binary.UuidRepresentation.UNSPECIFIED`. New</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a><span class="sd">        applications should consider setting this to</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a><span class="sd">        :data:`~bson.binary.UuidRepresentation.STANDARD` for cross language</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a><span class="sd">        compatibility. See :ref:`handling-uuid-data-example` for details.</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a><span class="sd">      - `unicode_decode_error_handler`: The error handler to apply when</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a><span class="sd">        a Unicode-related error occurs during BSON decoding that would</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a><span class="sd">        otherwise raise :exc:`UnicodeDecodeError`. Valid options include</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a><span class="sd">        &#39;strict&#39;, &#39;replace&#39;, &#39;backslashreplace&#39;, &#39;surrogateescape&#39;, and</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a><span class="sd">        &#39;ignore&#39;. Defaults to &#39;strict&#39;.</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a><span class="sd">      - `tzinfo`: A :class:`~datetime.tzinfo` subclass that specifies the</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a><span class="sd">        timezone to/from which :class:`~datetime.datetime` objects should be</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a><span class="sd">        encoded/decoded.</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a><span class="sd">      - `type_registry`: Instance of :class:`TypeRegistry` used to customize</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a><span class="sd">        encoding and decoding behavior.</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a><span class="sd">    .. versionchanged:: 4.0</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a><span class="sd">       The default for `uuid_representation` was changed from</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a><span class="sd">       :const:`~bson.binary.UuidRepresentation.PYTHON_LEGACY` to</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a><span class="sd">       :const:`~bson.binary.UuidRepresentation.UNSPECIFIED`.</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a><span class="sd">    .. versionadded:: 3.8</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a><span class="sd">       `type_registry` attribute.</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a><span class="sd">    .. warning:: Care must be taken when changing</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a><span class="sd">       `unicode_decode_error_handler` from its default value (&#39;strict&#39;).</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a><span class="sd">       The &#39;replace&#39; and &#39;ignore&#39; modes should not be used when documents</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a><span class="sd">       retrieved from the server will be modified in the client application</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a><span class="sd">       and stored back to the server.</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a>    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a>        <span class="bp">cls</span><span class="p">,</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a>        <span class="n">document_class</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a>        <span class="n">tz_aware</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a>        <span class="n">uuid_representation</span><span class="o">=</span><span class="n">UuidRepresentation</span><span class="o">.</span><span class="n">UNSPECIFIED</span><span class="p">,</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a>        <span class="n">unicode_decode_error_handler</span><span class="o">=</span><span class="s2">&quot;strict&quot;</span><span class="p">,</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a>        <span class="n">tzinfo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a>        <span class="n">type_registry</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a>    <span class="p">):</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">document_class</span><span class="p">,</span> <span class="n">_MutableMapping</span><span class="p">)</span> <span class="ow">or</span> <span class="n">_raw_document_class</span><span class="p">(</span><span class="n">document_class</span><span class="p">)):</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>                <span class="s2">&quot;document_class must be dict, bson.son.SON, &quot;</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a>                <span class="s2">&quot;bson.raw_bson.RawBSONDocument, or a &quot;</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a>                <span class="s2">&quot;sublass of collections.abc.MutableMapping&quot;</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>            <span class="p">)</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tz_aware</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;tz_aware must be True or False&quot;</span><span class="p">)</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a>        <span class="k">if</span> <span class="n">uuid_representation</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ALL_UUID_REPRESENTATIONS</span><span class="p">:</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a>                <span class="s2">&quot;uuid_representation must be a value &quot;</span> <span class="s2">&quot;from .binary.UuidRepresentation&quot;</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a>            <span class="p">)</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">unicode_decode_error_handler</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;unicode_decode_error_handler must be a string &quot;</span> <span class="s2">&quot;or None&quot;</span><span class="p">)</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a>        <span class="k">if</span> <span class="n">tzinfo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">):</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;tzinfo must be an instance of datetime.tzinfo&quot;</span><span class="p">)</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">tz_aware</span><span class="p">:</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;cannot specify tzinfo without also setting tz_aware=True&quot;</span><span class="p">)</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a>        <span class="n">type_registry</span> <span class="o">=</span> <span class="n">type_registry</span> <span class="ow">or</span> <span class="n">TypeRegistry</span><span class="p">()</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">type_registry</span><span class="p">,</span> <span class="n">TypeRegistry</span><span class="p">):</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;type_registry must be an instance of TypeRegistry&quot;</span><span class="p">)</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a>            <span class="bp">cls</span><span class="p">,</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a>            <span class="p">(</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a>                <span class="n">document_class</span><span class="p">,</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a>                <span class="n">tz_aware</span><span class="p">,</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a>                <span class="n">uuid_representation</span><span class="p">,</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a>                <span class="n">unicode_decode_error_handler</span><span class="p">,</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a>                <span class="n">tzinfo</span><span class="p">,</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a>                <span class="n">type_registry</span><span class="p">,</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a>            <span class="p">),</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a>        <span class="p">)</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a>    <span class="k">def</span> <span class="nf">_arguments_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Representation of the arguments used to create this object.&quot;&quot;&quot;</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a>        <span class="n">document_class_repr</span> <span class="o">=</span> <span class="s2">&quot;dict&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">document_class</span> <span class="ow">is</span> <span class="nb">dict</span> <span class="k">else</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">document_class</span><span class="p">)</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a>        <span class="n">uuid_rep_repr</span> <span class="o">=</span> <span class="n">UUID_REPRESENTATION_NAMES</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">uuid_representation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">uuid_representation</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a>        <span class="p">)</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a>            <span class="s2">&quot;document_class=</span><span class="si">%s</span><span class="s2">, tz_aware=</span><span class="si">%r</span><span class="s2">, uuid_representation=</span><span class="si">%s</span><span class="s2">, &quot;</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a>            <span class="s2">&quot;unicode_decode_error_handler=</span><span class="si">%r</span><span class="s2">, tzinfo=</span><span class="si">%r</span><span class="s2">, &quot;</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a>            <span class="s2">&quot;type_registry=</span><span class="si">%r</span><span class="s2">&quot;</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a>            <span class="o">%</span> <span class="p">(</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a>                <span class="n">document_class_repr</span><span class="p">,</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">tz_aware</span><span class="p">,</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a>                <span class="n">uuid_rep_repr</span><span class="p">,</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">unicode_decode_error_handler</span><span class="p">,</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">type_registry</span><span class="p">,</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a>            <span class="p">)</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a>        <span class="p">)</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a>    <span class="k">def</span> <span class="nf">_options_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Dictionary of the arguments used to create this object.&quot;&quot;&quot;</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a>        <span class="c1"># TODO: PYTHON-2442 use _asdict() instead</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a>            <span class="s2">&quot;document_class&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">document_class</span><span class="p">,</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a>            <span class="s2">&quot;tz_aware&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tz_aware</span><span class="p">,</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a>            <span class="s2">&quot;uuid_representation&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">uuid_representation</span><span class="p">,</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a>            <span class="s2">&quot;unicode_decode_error_handler&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">unicode_decode_error_handler</span><span class="p">,</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a>            <span class="s2">&quot;tzinfo&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a>            <span class="s2">&quot;type_registry&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_registry</span><span class="p">,</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a>        <span class="p">}</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arguments_repr</span><span class="p">())</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a>    <span class="k">def</span> <span class="nf">with_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Make a copy of this CodecOptions, overriding some options::</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a><span class="sd">            &gt;&gt;&gt; from .codec_options import DEFAULT_CODEC_OPTIONS</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a><span class="sd">            &gt;&gt;&gt; DEFAULT_CODEC_OPTIONS.tz_aware</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a><span class="sd">            False</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a><span class="sd">            &gt;&gt;&gt; options = DEFAULT_CODEC_OPTIONS.with_options(tz_aware=True)</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a><span class="sd">            &gt;&gt;&gt; options.tz_aware</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a><span class="sd">            True</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a><span class="sd">        .. versionadded:: 3.5</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a>        <span class="n">opts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options_dict</span><span class="p">()</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a>        <span class="n">opts</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a>        <span class="k">return</span> <span class="n">CodecOptions</span><span class="p">(</span><span class="o">**</span><span class="n">opts</span><span class="p">)</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a><span class="n">DEFAULT_CODEC_OPTIONS</span> <span class="o">=</span> <span class="n">CodecOptions</span><span class="p">()</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a><span class="k">def</span> <span class="nf">_parse_codec_options</span><span class="p">(</span><span class="n">options</span><span class="p">):</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse BSON codec options.&quot;&quot;&quot;</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a>    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a>    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">options</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">{</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a>        <span class="s2">&quot;document_class&quot;</span><span class="p">,</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a>        <span class="s2">&quot;tz_aware&quot;</span><span class="p">,</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a>        <span class="s2">&quot;uuidrepresentation&quot;</span><span class="p">,</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a>        <span class="s2">&quot;unicode_decode_error_handler&quot;</span><span class="p">,</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a>        <span class="s2">&quot;tzinfo&quot;</span><span class="p">,</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a>        <span class="s2">&quot;type_registry&quot;</span><span class="p">,</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a>    <span class="p">}:</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a>        <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s2">&quot;uuidrepresentation&quot;</span><span class="p">:</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a>            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;uuid_representation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a>            <span class="n">kwargs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a>    <span class="k">return</span> <span class="n">CodecOptions</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            </section>
                <section id="TypeEncoder">
                            <input id="TypeEncoder-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">TypeEncoder</span><wbr>(<span class="base">abc.ABC</span>):

                <label class="view-source-button" for="TypeEncoder-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TypeEncoder"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TypeEncoder-44"><a href="#TypeEncoder-44"><span class="linenos">44</span></a><span class="k">class</span> <span class="nc">TypeEncoder</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="TypeEncoder-45"><a href="#TypeEncoder-45"><span class="linenos">45</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for defining type codec classes which describe how a</span>
</span><span id="TypeEncoder-46"><a href="#TypeEncoder-46"><span class="linenos">46</span></a><span class="sd">    custom type can be transformed to one of the types BSON understands.</span>
</span><span id="TypeEncoder-47"><a href="#TypeEncoder-47"><span class="linenos">47</span></a>
</span><span id="TypeEncoder-48"><a href="#TypeEncoder-48"><span class="linenos">48</span></a><span class="sd">    Codec classes must implement the ``python_type`` attribute, and the</span>
</span><span id="TypeEncoder-49"><a href="#TypeEncoder-49"><span class="linenos">49</span></a><span class="sd">    ``transform_python`` method to support encoding.</span>
</span><span id="TypeEncoder-50"><a href="#TypeEncoder-50"><span class="linenos">50</span></a>
</span><span id="TypeEncoder-51"><a href="#TypeEncoder-51"><span class="linenos">51</span></a><span class="sd">    See :ref:`custom-type-type-codec` documentation for an example.</span>
</span><span id="TypeEncoder-52"><a href="#TypeEncoder-52"><span class="linenos">52</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="TypeEncoder-53"><a href="#TypeEncoder-53"><span class="linenos">53</span></a>
</span><span id="TypeEncoder-54"><a href="#TypeEncoder-54"><span class="linenos">54</span></a>    <span class="nd">@_abstractproperty</span>
</span><span id="TypeEncoder-55"><a href="#TypeEncoder-55"><span class="linenos">55</span></a>    <span class="k">def</span> <span class="nf">python_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="TypeEncoder-56"><a href="#TypeEncoder-56"><span class="linenos">56</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The Python type to be converted into something serializable.&quot;&quot;&quot;</span>
</span><span id="TypeEncoder-57"><a href="#TypeEncoder-57"><span class="linenos">57</span></a>        <span class="k">pass</span>
</span><span id="TypeEncoder-58"><a href="#TypeEncoder-58"><span class="linenos">58</span></a>
</span><span id="TypeEncoder-59"><a href="#TypeEncoder-59"><span class="linenos">59</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="TypeEncoder-60"><a href="#TypeEncoder-60"><span class="linenos">60</span></a>    <span class="k">def</span> <span class="nf">transform_python</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="TypeEncoder-61"><a href="#TypeEncoder-61"><span class="linenos">61</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the given Python object into something serializable.&quot;&quot;&quot;</span>
</span><span id="TypeEncoder-62"><a href="#TypeEncoder-62"><span class="linenos">62</span></a>        <span class="k">pass</span>
</span></pre></div>


            <div class="docstring"><p>Base class for defining type codec classes which describe how a
custom type can be transformed to one of the types BSON understands.</p>

<p>Codec classes must implement the <code><a href="#TypeEncoder.python_type">python_type</a></code> attribute, and the
<code><a href="#TypeEncoder.transform_python">transform_python</a></code> method to support encoding.</p>

<p>See :ref:<code>custom-type-type-codec</code> documentation for an example.</p>
</div>


                            <div id="TypeEncoder.python_type" class="classattr">
                                <div class="attr variable">
            <span class="name">python_type</span>

        
    </div>
    <a class="headerlink" href="#TypeEncoder.python_type"></a>
    
            <div class="docstring"><p>The Python type to be converted into something serializable.</p>
</div>


                            </div>
                            <div id="TypeEncoder.transform_python" class="classattr">
                                        <input id="TypeEncoder.transform_python-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abc.abstractmethod</div>

        <span class="def">def</span>
        <span class="name">transform_python</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">value</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="TypeEncoder.transform_python-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TypeEncoder.transform_python"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TypeEncoder.transform_python-59"><a href="#TypeEncoder.transform_python-59"><span class="linenos">59</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="TypeEncoder.transform_python-60"><a href="#TypeEncoder.transform_python-60"><span class="linenos">60</span></a>    <span class="k">def</span> <span class="nf">transform_python</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="TypeEncoder.transform_python-61"><a href="#TypeEncoder.transform_python-61"><span class="linenos">61</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the given Python object into something serializable.&quot;&quot;&quot;</span>
</span><span id="TypeEncoder.transform_python-62"><a href="#TypeEncoder.transform_python-62"><span class="linenos">62</span></a>        <span class="k">pass</span>
</span></pre></div>


            <div class="docstring"><p>Convert the given Python object into something serializable.</p>
</div>


                            </div>
                </section>
                <section id="TypeDecoder">
                            <input id="TypeDecoder-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">TypeDecoder</span><wbr>(<span class="base">abc.ABC</span>):

                <label class="view-source-button" for="TypeDecoder-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TypeDecoder"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TypeDecoder-65"><a href="#TypeDecoder-65"><span class="linenos">65</span></a><span class="k">class</span> <span class="nc">TypeDecoder</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="TypeDecoder-66"><a href="#TypeDecoder-66"><span class="linenos">66</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for defining type codec classes which describe how a</span>
</span><span id="TypeDecoder-67"><a href="#TypeDecoder-67"><span class="linenos">67</span></a><span class="sd">    BSON type can be transformed to a custom type.</span>
</span><span id="TypeDecoder-68"><a href="#TypeDecoder-68"><span class="linenos">68</span></a>
</span><span id="TypeDecoder-69"><a href="#TypeDecoder-69"><span class="linenos">69</span></a><span class="sd">    Codec classes must implement the ``bson_type`` attribute, and the</span>
</span><span id="TypeDecoder-70"><a href="#TypeDecoder-70"><span class="linenos">70</span></a><span class="sd">    ``transform_bson`` method to support decoding.</span>
</span><span id="TypeDecoder-71"><a href="#TypeDecoder-71"><span class="linenos">71</span></a>
</span><span id="TypeDecoder-72"><a href="#TypeDecoder-72"><span class="linenos">72</span></a><span class="sd">    See :ref:`custom-type-type-codec` documentation for an example.</span>
</span><span id="TypeDecoder-73"><a href="#TypeDecoder-73"><span class="linenos">73</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="TypeDecoder-74"><a href="#TypeDecoder-74"><span class="linenos">74</span></a>
</span><span id="TypeDecoder-75"><a href="#TypeDecoder-75"><span class="linenos">75</span></a>    <span class="nd">@_abstractproperty</span>
</span><span id="TypeDecoder-76"><a href="#TypeDecoder-76"><span class="linenos">76</span></a>    <span class="k">def</span> <span class="nf">bson_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="TypeDecoder-77"><a href="#TypeDecoder-77"><span class="linenos">77</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The BSON type to be converted into our own type.&quot;&quot;&quot;</span>
</span><span id="TypeDecoder-78"><a href="#TypeDecoder-78"><span class="linenos">78</span></a>        <span class="k">pass</span>
</span><span id="TypeDecoder-79"><a href="#TypeDecoder-79"><span class="linenos">79</span></a>
</span><span id="TypeDecoder-80"><a href="#TypeDecoder-80"><span class="linenos">80</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="TypeDecoder-81"><a href="#TypeDecoder-81"><span class="linenos">81</span></a>    <span class="k">def</span> <span class="nf">transform_bson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="TypeDecoder-82"><a href="#TypeDecoder-82"><span class="linenos">82</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the given BSON value into our own type.&quot;&quot;&quot;</span>
</span><span id="TypeDecoder-83"><a href="#TypeDecoder-83"><span class="linenos">83</span></a>        <span class="k">pass</span>
</span></pre></div>


            <div class="docstring"><p>Base class for defining type codec classes which describe how a
BSON type can be transformed to a custom type.</p>

<p>Codec classes must implement the <code><a href="#TypeDecoder.bson_type">bson_type</a></code> attribute, and the
<code><a href="#TypeDecoder.transform_bson">transform_bson</a></code> method to support decoding.</p>

<p>See :ref:<code>custom-type-type-codec</code> documentation for an example.</p>
</div>


                            <div id="TypeDecoder.bson_type" class="classattr">
                                <div class="attr variable">
            <span class="name">bson_type</span>

        
    </div>
    <a class="headerlink" href="#TypeDecoder.bson_type"></a>
    
            <div class="docstring"><p>The BSON type to be converted into our own type.</p>
</div>


                            </div>
                            <div id="TypeDecoder.transform_bson" class="classattr">
                                        <input id="TypeDecoder.transform_bson-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abc.abstractmethod</div>

        <span class="def">def</span>
        <span class="name">transform_bson</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">value</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="TypeDecoder.transform_bson-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TypeDecoder.transform_bson"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TypeDecoder.transform_bson-80"><a href="#TypeDecoder.transform_bson-80"><span class="linenos">80</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="TypeDecoder.transform_bson-81"><a href="#TypeDecoder.transform_bson-81"><span class="linenos">81</span></a>    <span class="k">def</span> <span class="nf">transform_bson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="TypeDecoder.transform_bson-82"><a href="#TypeDecoder.transform_bson-82"><span class="linenos">82</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the given BSON value into our own type.&quot;&quot;&quot;</span>
</span><span id="TypeDecoder.transform_bson-83"><a href="#TypeDecoder.transform_bson-83"><span class="linenos">83</span></a>        <span class="k">pass</span>
</span></pre></div>


            <div class="docstring"><p>Convert the given BSON value into our own type.</p>
</div>


                            </div>
                </section>
                <section id="TypeCodec">
                            <input id="TypeCodec-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">TypeCodec</span><wbr>(<span class="base"><a href="#TypeEncoder">TypeEncoder</a></span>, <span class="base"><a href="#TypeDecoder">TypeDecoder</a></span>):

                <label class="view-source-button" for="TypeCodec-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TypeCodec"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TypeCodec-86"><a href="#TypeCodec-86"><span class="linenos">86</span></a><span class="k">class</span> <span class="nc">TypeCodec</span><span class="p">(</span><span class="n">TypeEncoder</span><span class="p">,</span> <span class="n">TypeDecoder</span><span class="p">):</span>
</span><span id="TypeCodec-87"><a href="#TypeCodec-87"><span class="linenos">87</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for defining type codec classes which describe how a</span>
</span><span id="TypeCodec-88"><a href="#TypeCodec-88"><span class="linenos">88</span></a><span class="sd">    custom type can be transformed to/from one of the types :mod:`bson`</span>
</span><span id="TypeCodec-89"><a href="#TypeCodec-89"><span class="linenos">89</span></a><span class="sd">    can already encode/decode.</span>
</span><span id="TypeCodec-90"><a href="#TypeCodec-90"><span class="linenos">90</span></a>
</span><span id="TypeCodec-91"><a href="#TypeCodec-91"><span class="linenos">91</span></a><span class="sd">    Codec classes must implement the ``python_type`` attribute, and the</span>
</span><span id="TypeCodec-92"><a href="#TypeCodec-92"><span class="linenos">92</span></a><span class="sd">    ``transform_python`` method to support encoding, as well as the</span>
</span><span id="TypeCodec-93"><a href="#TypeCodec-93"><span class="linenos">93</span></a><span class="sd">    ``bson_type`` attribute, and the ``transform_bson`` method to support</span>
</span><span id="TypeCodec-94"><a href="#TypeCodec-94"><span class="linenos">94</span></a><span class="sd">    decoding.</span>
</span><span id="TypeCodec-95"><a href="#TypeCodec-95"><span class="linenos">95</span></a>
</span><span id="TypeCodec-96"><a href="#TypeCodec-96"><span class="linenos">96</span></a><span class="sd">    See :ref:`custom-type-type-codec` documentation for an example.</span>
</span><span id="TypeCodec-97"><a href="#TypeCodec-97"><span class="linenos">97</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="TypeCodec-98"><a href="#TypeCodec-98"><span class="linenos">98</span></a>
</span><span id="TypeCodec-99"><a href="#TypeCodec-99"><span class="linenos">99</span></a>    <span class="k">pass</span>
</span></pre></div>


            <div class="docstring"><p>Base class for defining type codec classes which describe how a
custom type can be transformed to/from one of the types <code>bson</code>
can already encode/decode.</p>

<p>Codec classes must implement the <code><a href="#TypeCodec.python_type">python_type</a></code> attribute, and the
<code><a href="#TypeCodec.transform_python">transform_python</a></code> method to support encoding, as well as the
<code><a href="#TypeCodec.bson_type">bson_type</a></code> attribute, and the <code><a href="#TypeCodec.transform_bson">transform_bson</a></code> method to support
decoding.</p>

<p>See :ref:<code>custom-type-type-codec</code> documentation for an example.</p>
</div>


                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#TypeEncoder">TypeEncoder</a></dt>
                                <dd id="TypeCodec.python_type" class="variable"><a href="#TypeEncoder.python_type">python_type</a></dd>
                <dd id="TypeCodec.transform_python" class="function"><a href="#TypeEncoder.transform_python">transform_python</a></dd>

            </div>
            <div><dt><a href="#TypeDecoder">TypeDecoder</a></dt>
                                <dd id="TypeCodec.bson_type" class="variable"><a href="#TypeDecoder.bson_type">bson_type</a></dd>
                <dd id="TypeCodec.transform_bson" class="function"><a href="#TypeDecoder.transform_bson">transform_bson</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="TypeRegistry">
                            <input id="TypeRegistry-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">TypeRegistry</span>:

                <label class="view-source-button" for="TypeRegistry-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TypeRegistry"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TypeRegistry-102"><a href="#TypeRegistry-102"><span class="linenos">102</span></a><span class="k">class</span> <span class="nc">TypeRegistry</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="TypeRegistry-103"><a href="#TypeRegistry-103"><span class="linenos">103</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Encapsulates type codecs used in encoding and / or decoding BSON, as</span>
</span><span id="TypeRegistry-104"><a href="#TypeRegistry-104"><span class="linenos">104</span></a><span class="sd">    well as the fallback encoder. Type registries cannot be modified after</span>
</span><span id="TypeRegistry-105"><a href="#TypeRegistry-105"><span class="linenos">105</span></a><span class="sd">    instantiation.</span>
</span><span id="TypeRegistry-106"><a href="#TypeRegistry-106"><span class="linenos">106</span></a>
</span><span id="TypeRegistry-107"><a href="#TypeRegistry-107"><span class="linenos">107</span></a><span class="sd">    ``TypeRegistry`` can be initialized with an iterable of type codecs, and</span>
</span><span id="TypeRegistry-108"><a href="#TypeRegistry-108"><span class="linenos">108</span></a><span class="sd">    a callable for the fallback encoder::</span>
</span><span id="TypeRegistry-109"><a href="#TypeRegistry-109"><span class="linenos">109</span></a>
</span><span id="TypeRegistry-110"><a href="#TypeRegistry-110"><span class="linenos">110</span></a><span class="sd">      &gt;&gt;&gt; from .codec_options import TypeRegistry</span>
</span><span id="TypeRegistry-111"><a href="#TypeRegistry-111"><span class="linenos">111</span></a><span class="sd">      &gt;&gt;&gt; type_registry = TypeRegistry([Codec1, Codec2, Codec3, ...],</span>
</span><span id="TypeRegistry-112"><a href="#TypeRegistry-112"><span class="linenos">112</span></a><span class="sd">      ...                              fallback_encoder)</span>
</span><span id="TypeRegistry-113"><a href="#TypeRegistry-113"><span class="linenos">113</span></a>
</span><span id="TypeRegistry-114"><a href="#TypeRegistry-114"><span class="linenos">114</span></a><span class="sd">    See :ref:`custom-type-type-registry` documentation for an example.</span>
</span><span id="TypeRegistry-115"><a href="#TypeRegistry-115"><span class="linenos">115</span></a>
</span><span id="TypeRegistry-116"><a href="#TypeRegistry-116"><span class="linenos">116</span></a><span class="sd">    :Parameters:</span>
</span><span id="TypeRegistry-117"><a href="#TypeRegistry-117"><span class="linenos">117</span></a><span class="sd">      - `type_codecs` (optional): iterable of type codec instances. If</span>
</span><span id="TypeRegistry-118"><a href="#TypeRegistry-118"><span class="linenos">118</span></a><span class="sd">        ``type_codecs`` contains multiple codecs that transform a single</span>
</span><span id="TypeRegistry-119"><a href="#TypeRegistry-119"><span class="linenos">119</span></a><span class="sd">        python or BSON type, the transformation specified by the type codec</span>
</span><span id="TypeRegistry-120"><a href="#TypeRegistry-120"><span class="linenos">120</span></a><span class="sd">        occurring last prevails. A TypeError will be raised if one or more</span>
</span><span id="TypeRegistry-121"><a href="#TypeRegistry-121"><span class="linenos">121</span></a><span class="sd">        type codecs modify the encoding behavior of a built-in :mod:`bson`</span>
</span><span id="TypeRegistry-122"><a href="#TypeRegistry-122"><span class="linenos">122</span></a><span class="sd">        type.</span>
</span><span id="TypeRegistry-123"><a href="#TypeRegistry-123"><span class="linenos">123</span></a><span class="sd">      - `fallback_encoder` (optional): callable that accepts a single,</span>
</span><span id="TypeRegistry-124"><a href="#TypeRegistry-124"><span class="linenos">124</span></a><span class="sd">        unencodable python value and transforms it into a type that</span>
</span><span id="TypeRegistry-125"><a href="#TypeRegistry-125"><span class="linenos">125</span></a><span class="sd">        :mod:`bson` can encode. See :ref:`fallback-encoder-callable`</span>
</span><span id="TypeRegistry-126"><a href="#TypeRegistry-126"><span class="linenos">126</span></a><span class="sd">        documentation for an example.</span>
</span><span id="TypeRegistry-127"><a href="#TypeRegistry-127"><span class="linenos">127</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="TypeRegistry-128"><a href="#TypeRegistry-128"><span class="linenos">128</span></a>
</span><span id="TypeRegistry-129"><a href="#TypeRegistry-129"><span class="linenos">129</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">type_codecs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fallback_encoder</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="TypeRegistry-130"><a href="#TypeRegistry-130"><span class="linenos">130</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__type_codecs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">type_codecs</span> <span class="ow">or</span> <span class="p">[])</span>
</span><span id="TypeRegistry-131"><a href="#TypeRegistry-131"><span class="linenos">131</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_fallback_encoder</span> <span class="o">=</span> <span class="n">fallback_encoder</span>
</span><span id="TypeRegistry-132"><a href="#TypeRegistry-132"><span class="linenos">132</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_encoder_map</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="TypeRegistry-133"><a href="#TypeRegistry-133"><span class="linenos">133</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_decoder_map</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="TypeRegistry-134"><a href="#TypeRegistry-134"><span class="linenos">134</span></a>
</span><span id="TypeRegistry-135"><a href="#TypeRegistry-135"><span class="linenos">135</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fallback_encoder</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TypeRegistry-136"><a href="#TypeRegistry-136"><span class="linenos">136</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">fallback_encoder</span><span class="p">):</span>
</span><span id="TypeRegistry-137"><a href="#TypeRegistry-137"><span class="linenos">137</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;fallback_encoder </span><span class="si">%r</span><span class="s2"> is not a callable&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fallback_encoder</span><span class="p">))</span>
</span><span id="TypeRegistry-138"><a href="#TypeRegistry-138"><span class="linenos">138</span></a>
</span><span id="TypeRegistry-139"><a href="#TypeRegistry-139"><span class="linenos">139</span></a>        <span class="k">for</span> <span class="n">codec</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__type_codecs</span><span class="p">:</span>
</span><span id="TypeRegistry-140"><a href="#TypeRegistry-140"><span class="linenos">140</span></a>            <span class="n">is_valid_codec</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="TypeRegistry-141"><a href="#TypeRegistry-141"><span class="linenos">141</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">TypeEncoder</span><span class="p">):</span>
</span><span id="TypeRegistry-142"><a href="#TypeRegistry-142"><span class="linenos">142</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_validate_type_encoder</span><span class="p">(</span><span class="n">codec</span><span class="p">)</span>
</span><span id="TypeRegistry-143"><a href="#TypeRegistry-143"><span class="linenos">143</span></a>                <span class="n">is_valid_codec</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="TypeRegistry-144"><a href="#TypeRegistry-144"><span class="linenos">144</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_encoder_map</span><span class="p">[</span><span class="n">codec</span><span class="o">.</span><span class="n">python_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">codec</span><span class="o">.</span><span class="n">transform_python</span>
</span><span id="TypeRegistry-145"><a href="#TypeRegistry-145"><span class="linenos">145</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">TypeDecoder</span><span class="p">):</span>
</span><span id="TypeRegistry-146"><a href="#TypeRegistry-146"><span class="linenos">146</span></a>                <span class="n">is_valid_codec</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="TypeRegistry-147"><a href="#TypeRegistry-147"><span class="linenos">147</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_decoder_map</span><span class="p">[</span><span class="n">codec</span><span class="o">.</span><span class="n">bson_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">codec</span><span class="o">.</span><span class="n">transform_bson</span>
</span><span id="TypeRegistry-148"><a href="#TypeRegistry-148"><span class="linenos">148</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_valid_codec</span><span class="p">:</span>
</span><span id="TypeRegistry-149"><a href="#TypeRegistry-149"><span class="linenos">149</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="TypeRegistry-150"><a href="#TypeRegistry-150"><span class="linenos">150</span></a>                    <span class="s2">&quot;Expected an instance of </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, or </span><span class="si">%s</span><span class="s2">, got </span><span class="si">%r</span><span class="s2"> instead&quot;</span>
</span><span id="TypeRegistry-151"><a href="#TypeRegistry-151"><span class="linenos">151</span></a>                    <span class="o">%</span> <span class="p">(</span><span class="n">TypeEncoder</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">TypeDecoder</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">TypeCodec</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">codec</span><span class="p">)</span>
</span><span id="TypeRegistry-152"><a href="#TypeRegistry-152"><span class="linenos">152</span></a>                <span class="p">)</span>
</span><span id="TypeRegistry-153"><a href="#TypeRegistry-153"><span class="linenos">153</span></a>
</span><span id="TypeRegistry-154"><a href="#TypeRegistry-154"><span class="linenos">154</span></a>    <span class="k">def</span> <span class="nf">_validate_type_encoder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">codec</span><span class="p">):</span>
</span><span id="TypeRegistry-155"><a href="#TypeRegistry-155"><span class="linenos">155</span></a>        <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">_BUILT_IN_TYPES</span>
</span><span id="TypeRegistry-156"><a href="#TypeRegistry-156"><span class="linenos">156</span></a>
</span><span id="TypeRegistry-157"><a href="#TypeRegistry-157"><span class="linenos">157</span></a>        <span class="k">for</span> <span class="n">pytype</span> <span class="ow">in</span> <span class="n">_BUILT_IN_TYPES</span><span class="p">:</span>
</span><span id="TypeRegistry-158"><a href="#TypeRegistry-158"><span class="linenos">158</span></a>            <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">codec</span><span class="o">.</span><span class="n">python_type</span><span class="p">,</span> <span class="n">pytype</span><span class="p">):</span>
</span><span id="TypeRegistry-159"><a href="#TypeRegistry-159"><span class="linenos">159</span></a>                <span class="n">err_msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="TypeRegistry-160"><a href="#TypeRegistry-160"><span class="linenos">160</span></a>                    <span class="s2">&quot;TypeEncoders cannot change how built-in types are &quot;</span>
</span><span id="TypeRegistry-161"><a href="#TypeRegistry-161"><span class="linenos">161</span></a>                    <span class="s2">&quot;encoded (encoder </span><span class="si">%s</span><span class="s2"> transforms type </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">pytype</span><span class="p">)</span>
</span><span id="TypeRegistry-162"><a href="#TypeRegistry-162"><span class="linenos">162</span></a>                <span class="p">)</span>
</span><span id="TypeRegistry-163"><a href="#TypeRegistry-163"><span class="linenos">163</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
</span><span id="TypeRegistry-164"><a href="#TypeRegistry-164"><span class="linenos">164</span></a>
</span><span id="TypeRegistry-165"><a href="#TypeRegistry-165"><span class="linenos">165</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="TypeRegistry-166"><a href="#TypeRegistry-166"><span class="linenos">166</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(type_codecs=</span><span class="si">%r</span><span class="s2">, fallback_encoder=</span><span class="si">%r</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
</span><span id="TypeRegistry-167"><a href="#TypeRegistry-167"><span class="linenos">167</span></a>            <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
</span><span id="TypeRegistry-168"><a href="#TypeRegistry-168"><span class="linenos">168</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__type_codecs</span><span class="p">,</span>
</span><span id="TypeRegistry-169"><a href="#TypeRegistry-169"><span class="linenos">169</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_fallback_encoder</span><span class="p">,</span>
</span><span id="TypeRegistry-170"><a href="#TypeRegistry-170"><span class="linenos">170</span></a>        <span class="p">)</span>
</span><span id="TypeRegistry-171"><a href="#TypeRegistry-171"><span class="linenos">171</span></a>
</span><span id="TypeRegistry-172"><a href="#TypeRegistry-172"><span class="linenos">172</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="TypeRegistry-173"><a href="#TypeRegistry-173"><span class="linenos">173</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
</span><span id="TypeRegistry-174"><a href="#TypeRegistry-174"><span class="linenos">174</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="TypeRegistry-175"><a href="#TypeRegistry-175"><span class="linenos">175</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="TypeRegistry-176"><a href="#TypeRegistry-176"><span class="linenos">176</span></a>            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_decoder_map</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_decoder_map</span><span class="p">)</span>
</span><span id="TypeRegistry-177"><a href="#TypeRegistry-177"><span class="linenos">177</span></a>            <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_encoder_map</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_encoder_map</span><span class="p">)</span>
</span><span id="TypeRegistry-178"><a href="#TypeRegistry-178"><span class="linenos">178</span></a>            <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fallback_encoder</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_fallback_encoder</span><span class="p">)</span>
</span><span id="TypeRegistry-179"><a href="#TypeRegistry-179"><span class="linenos">179</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Encapsulates type codecs used in encoding and / or decoding BSON, as
well as the fallback encoder. Type registries cannot be modified after
instantiation.</p>

<p><code><a href="#TypeRegistry">TypeRegistry</a></code> can be initialized with an iterable of type codecs, and
a callable for the fallback encoder::</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.codec_options</span> <span class="kn">import</span> <span class="n">TypeRegistry</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">type_registry</span> <span class="o">=</span> <span class="n">TypeRegistry</span><span class="p">([</span><span class="n">Codec1</span><span class="p">,</span> <span class="n">Codec2</span><span class="p">,</span> <span class="n">Codec3</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
<span class="gp">... </span>                             <span class="n">fallback_encoder</span><span class="p">)</span>
</code></pre>
</div>

<p>See :ref:<code>custom-type-type-registry</code> documentation for an example.</p>

<p>:Parameters:</p>

<ul>
<li><code>type_codecs</code> (optional): iterable of type codec instances. If
<code>type_codecs</code> contains multiple codecs that transform a single
python or BSON type, the transformation specified by the type codec
occurring last prevails. A TypeError will be raised if one or more
type codecs modify the encoding behavior of a built-in <code>bson</code>
type.</li>
<li><code>fallback_encoder</code> (optional): callable that accepts a single,
unencodable python value and transforms it into a type that
<code>bson</code> can encode. See :ref:<code>fallback-encoder-callable</code>
documentation for an example.</li>
</ul>
</div>


                            <div id="TypeRegistry.__init__" class="classattr">
                                        <input id="TypeRegistry.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">TypeRegistry</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">type_codecs</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">fallback_encoder</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="TypeRegistry.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TypeRegistry.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TypeRegistry.__init__-129"><a href="#TypeRegistry.__init__-129"><span class="linenos">129</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">type_codecs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fallback_encoder</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="TypeRegistry.__init__-130"><a href="#TypeRegistry.__init__-130"><span class="linenos">130</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__type_codecs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">type_codecs</span> <span class="ow">or</span> <span class="p">[])</span>
</span><span id="TypeRegistry.__init__-131"><a href="#TypeRegistry.__init__-131"><span class="linenos">131</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_fallback_encoder</span> <span class="o">=</span> <span class="n">fallback_encoder</span>
</span><span id="TypeRegistry.__init__-132"><a href="#TypeRegistry.__init__-132"><span class="linenos">132</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_encoder_map</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="TypeRegistry.__init__-133"><a href="#TypeRegistry.__init__-133"><span class="linenos">133</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_decoder_map</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="TypeRegistry.__init__-134"><a href="#TypeRegistry.__init__-134"><span class="linenos">134</span></a>
</span><span id="TypeRegistry.__init__-135"><a href="#TypeRegistry.__init__-135"><span class="linenos">135</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fallback_encoder</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TypeRegistry.__init__-136"><a href="#TypeRegistry.__init__-136"><span class="linenos">136</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">fallback_encoder</span><span class="p">):</span>
</span><span id="TypeRegistry.__init__-137"><a href="#TypeRegistry.__init__-137"><span class="linenos">137</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;fallback_encoder </span><span class="si">%r</span><span class="s2"> is not a callable&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fallback_encoder</span><span class="p">))</span>
</span><span id="TypeRegistry.__init__-138"><a href="#TypeRegistry.__init__-138"><span class="linenos">138</span></a>
</span><span id="TypeRegistry.__init__-139"><a href="#TypeRegistry.__init__-139"><span class="linenos">139</span></a>        <span class="k">for</span> <span class="n">codec</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__type_codecs</span><span class="p">:</span>
</span><span id="TypeRegistry.__init__-140"><a href="#TypeRegistry.__init__-140"><span class="linenos">140</span></a>            <span class="n">is_valid_codec</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="TypeRegistry.__init__-141"><a href="#TypeRegistry.__init__-141"><span class="linenos">141</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">TypeEncoder</span><span class="p">):</span>
</span><span id="TypeRegistry.__init__-142"><a href="#TypeRegistry.__init__-142"><span class="linenos">142</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_validate_type_encoder</span><span class="p">(</span><span class="n">codec</span><span class="p">)</span>
</span><span id="TypeRegistry.__init__-143"><a href="#TypeRegistry.__init__-143"><span class="linenos">143</span></a>                <span class="n">is_valid_codec</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="TypeRegistry.__init__-144"><a href="#TypeRegistry.__init__-144"><span class="linenos">144</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_encoder_map</span><span class="p">[</span><span class="n">codec</span><span class="o">.</span><span class="n">python_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">codec</span><span class="o">.</span><span class="n">transform_python</span>
</span><span id="TypeRegistry.__init__-145"><a href="#TypeRegistry.__init__-145"><span class="linenos">145</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">TypeDecoder</span><span class="p">):</span>
</span><span id="TypeRegistry.__init__-146"><a href="#TypeRegistry.__init__-146"><span class="linenos">146</span></a>                <span class="n">is_valid_codec</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="TypeRegistry.__init__-147"><a href="#TypeRegistry.__init__-147"><span class="linenos">147</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_decoder_map</span><span class="p">[</span><span class="n">codec</span><span class="o">.</span><span class="n">bson_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">codec</span><span class="o">.</span><span class="n">transform_bson</span>
</span><span id="TypeRegistry.__init__-148"><a href="#TypeRegistry.__init__-148"><span class="linenos">148</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_valid_codec</span><span class="p">:</span>
</span><span id="TypeRegistry.__init__-149"><a href="#TypeRegistry.__init__-149"><span class="linenos">149</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="TypeRegistry.__init__-150"><a href="#TypeRegistry.__init__-150"><span class="linenos">150</span></a>                    <span class="s2">&quot;Expected an instance of </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, or </span><span class="si">%s</span><span class="s2">, got </span><span class="si">%r</span><span class="s2"> instead&quot;</span>
</span><span id="TypeRegistry.__init__-151"><a href="#TypeRegistry.__init__-151"><span class="linenos">151</span></a>                    <span class="o">%</span> <span class="p">(</span><span class="n">TypeEncoder</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">TypeDecoder</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">TypeCodec</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">codec</span><span class="p">)</span>
</span><span id="TypeRegistry.__init__-152"><a href="#TypeRegistry.__init__-152"><span class="linenos">152</span></a>                <span class="p">)</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="CodecOptions">
                            <input id="CodecOptions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">CodecOptions</span><wbr>(<span class="base"><a href="#CodecOptions">CodecOptions</a></span>):

                <label class="view-source-button" for="CodecOptions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CodecOptions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CodecOptions-195"><a href="#CodecOptions-195"><span class="linenos">195</span></a><span class="k">class</span> <span class="nc">CodecOptions</span><span class="p">(</span><span class="n">_options_base</span><span class="p">):</span>
</span><span id="CodecOptions-196"><a href="#CodecOptions-196"><span class="linenos">196</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Encapsulates options used encoding and / or decoding BSON.</span>
</span><span id="CodecOptions-197"><a href="#CodecOptions-197"><span class="linenos">197</span></a>
</span><span id="CodecOptions-198"><a href="#CodecOptions-198"><span class="linenos">198</span></a><span class="sd">    The `document_class` option is used to define a custom type for use</span>
</span><span id="CodecOptions-199"><a href="#CodecOptions-199"><span class="linenos">199</span></a><span class="sd">    decoding BSON documents. Access to the underlying raw BSON bytes for</span>
</span><span id="CodecOptions-200"><a href="#CodecOptions-200"><span class="linenos">200</span></a><span class="sd">    a document is available using the :class:`~bson.raw_bson.RawBSONDocument`</span>
</span><span id="CodecOptions-201"><a href="#CodecOptions-201"><span class="linenos">201</span></a><span class="sd">    type::</span>
</span><span id="CodecOptions-202"><a href="#CodecOptions-202"><span class="linenos">202</span></a>
</span><span id="CodecOptions-203"><a href="#CodecOptions-203"><span class="linenos">203</span></a><span class="sd">      &gt;&gt;&gt; from .raw_bson import RawBSONDocument</span>
</span><span id="CodecOptions-204"><a href="#CodecOptions-204"><span class="linenos">204</span></a><span class="sd">      &gt;&gt;&gt; from .codec_options import CodecOptions</span>
</span><span id="CodecOptions-205"><a href="#CodecOptions-205"><span class="linenos">205</span></a><span class="sd">      &gt;&gt;&gt; codec_options = CodecOptions(document_class=RawBSONDocument)</span>
</span><span id="CodecOptions-206"><a href="#CodecOptions-206"><span class="linenos">206</span></a><span class="sd">      &gt;&gt;&gt; coll = db.get_collection(&#39;test&#39;, codec_options=codec_options)</span>
</span><span id="CodecOptions-207"><a href="#CodecOptions-207"><span class="linenos">207</span></a><span class="sd">      &gt;&gt;&gt; doc = coll.find_one()</span>
</span><span id="CodecOptions-208"><a href="#CodecOptions-208"><span class="linenos">208</span></a><span class="sd">      &gt;&gt;&gt; doc.raw</span>
</span><span id="CodecOptions-209"><a href="#CodecOptions-209"><span class="linenos">209</span></a><span class="sd">      &#39;\\x16\\x00\\x00\\x00\\x07_id\\x00[0\\x165\\x91\\x10\\xea\\x14\\xe8\\xc5\\x8b\\x93\\x00&#39;</span>
</span><span id="CodecOptions-210"><a href="#CodecOptions-210"><span class="linenos">210</span></a>
</span><span id="CodecOptions-211"><a href="#CodecOptions-211"><span class="linenos">211</span></a><span class="sd">    The document class can be any type that inherits from</span>
</span><span id="CodecOptions-212"><a href="#CodecOptions-212"><span class="linenos">212</span></a><span class="sd">    :class:`~collections.abc.MutableMapping`::</span>
</span><span id="CodecOptions-213"><a href="#CodecOptions-213"><span class="linenos">213</span></a>
</span><span id="CodecOptions-214"><a href="#CodecOptions-214"><span class="linenos">214</span></a><span class="sd">      &gt;&gt;&gt; class AttributeDict(dict):</span>
</span><span id="CodecOptions-215"><a href="#CodecOptions-215"><span class="linenos">215</span></a><span class="sd">      ...     # A dict that supports attribute access.</span>
</span><span id="CodecOptions-216"><a href="#CodecOptions-216"><span class="linenos">216</span></a><span class="sd">      ...     def __getattr__(self, key):</span>
</span><span id="CodecOptions-217"><a href="#CodecOptions-217"><span class="linenos">217</span></a><span class="sd">      ...         return self[key]</span>
</span><span id="CodecOptions-218"><a href="#CodecOptions-218"><span class="linenos">218</span></a><span class="sd">      ...     def __setattr__(self, key, value):</span>
</span><span id="CodecOptions-219"><a href="#CodecOptions-219"><span class="linenos">219</span></a><span class="sd">      ...         self[key] = value</span>
</span><span id="CodecOptions-220"><a href="#CodecOptions-220"><span class="linenos">220</span></a><span class="sd">      ...</span>
</span><span id="CodecOptions-221"><a href="#CodecOptions-221"><span class="linenos">221</span></a><span class="sd">      &gt;&gt;&gt; codec_options = CodecOptions(document_class=AttributeDict)</span>
</span><span id="CodecOptions-222"><a href="#CodecOptions-222"><span class="linenos">222</span></a><span class="sd">      &gt;&gt;&gt; coll = db.get_collection(&#39;test&#39;, codec_options=codec_options)</span>
</span><span id="CodecOptions-223"><a href="#CodecOptions-223"><span class="linenos">223</span></a><span class="sd">      &gt;&gt;&gt; doc = coll.find_one()</span>
</span><span id="CodecOptions-224"><a href="#CodecOptions-224"><span class="linenos">224</span></a><span class="sd">      &gt;&gt;&gt; doc._id</span>
</span><span id="CodecOptions-225"><a href="#CodecOptions-225"><span class="linenos">225</span></a><span class="sd">      ObjectId(&#39;5b3016359110ea14e8c58b93&#39;)</span>
</span><span id="CodecOptions-226"><a href="#CodecOptions-226"><span class="linenos">226</span></a>
</span><span id="CodecOptions-227"><a href="#CodecOptions-227"><span class="linenos">227</span></a><span class="sd">    See :doc:`/examples/datetimes` for examples using the `tz_aware` and</span>
</span><span id="CodecOptions-228"><a href="#CodecOptions-228"><span class="linenos">228</span></a><span class="sd">    `tzinfo` options.</span>
</span><span id="CodecOptions-229"><a href="#CodecOptions-229"><span class="linenos">229</span></a>
</span><span id="CodecOptions-230"><a href="#CodecOptions-230"><span class="linenos">230</span></a><span class="sd">    See :doc:`examples/uuid` for examples using the `uuid_representation`</span>
</span><span id="CodecOptions-231"><a href="#CodecOptions-231"><span class="linenos">231</span></a><span class="sd">    option.</span>
</span><span id="CodecOptions-232"><a href="#CodecOptions-232"><span class="linenos">232</span></a>
</span><span id="CodecOptions-233"><a href="#CodecOptions-233"><span class="linenos">233</span></a><span class="sd">    :Parameters:</span>
</span><span id="CodecOptions-234"><a href="#CodecOptions-234"><span class="linenos">234</span></a><span class="sd">      - `document_class`: BSON documents returned in queries will be decoded</span>
</span><span id="CodecOptions-235"><a href="#CodecOptions-235"><span class="linenos">235</span></a><span class="sd">        to an instance of this class. Must be a subclass of</span>
</span><span id="CodecOptions-236"><a href="#CodecOptions-236"><span class="linenos">236</span></a><span class="sd">        :class:`~collections.abc.MutableMapping`. Defaults to :class:`dict`.</span>
</span><span id="CodecOptions-237"><a href="#CodecOptions-237"><span class="linenos">237</span></a><span class="sd">      - `tz_aware`: If ``True``, BSON datetimes will be decoded to timezone</span>
</span><span id="CodecOptions-238"><a href="#CodecOptions-238"><span class="linenos">238</span></a><span class="sd">        aware instances of :class:`~datetime.datetime`. Otherwise they will be</span>
</span><span id="CodecOptions-239"><a href="#CodecOptions-239"><span class="linenos">239</span></a><span class="sd">        naive. Defaults to ``False``.</span>
</span><span id="CodecOptions-240"><a href="#CodecOptions-240"><span class="linenos">240</span></a><span class="sd">      - `uuid_representation`: The BSON representation to use when encoding</span>
</span><span id="CodecOptions-241"><a href="#CodecOptions-241"><span class="linenos">241</span></a><span class="sd">        and decoding instances of :class:`~uuid.UUID`. Defaults to</span>
</span><span id="CodecOptions-242"><a href="#CodecOptions-242"><span class="linenos">242</span></a><span class="sd">        :data:`~bson.binary.UuidRepresentation.UNSPECIFIED`. New</span>
</span><span id="CodecOptions-243"><a href="#CodecOptions-243"><span class="linenos">243</span></a><span class="sd">        applications should consider setting this to</span>
</span><span id="CodecOptions-244"><a href="#CodecOptions-244"><span class="linenos">244</span></a><span class="sd">        :data:`~bson.binary.UuidRepresentation.STANDARD` for cross language</span>
</span><span id="CodecOptions-245"><a href="#CodecOptions-245"><span class="linenos">245</span></a><span class="sd">        compatibility. See :ref:`handling-uuid-data-example` for details.</span>
</span><span id="CodecOptions-246"><a href="#CodecOptions-246"><span class="linenos">246</span></a><span class="sd">      - `unicode_decode_error_handler`: The error handler to apply when</span>
</span><span id="CodecOptions-247"><a href="#CodecOptions-247"><span class="linenos">247</span></a><span class="sd">        a Unicode-related error occurs during BSON decoding that would</span>
</span><span id="CodecOptions-248"><a href="#CodecOptions-248"><span class="linenos">248</span></a><span class="sd">        otherwise raise :exc:`UnicodeDecodeError`. Valid options include</span>
</span><span id="CodecOptions-249"><a href="#CodecOptions-249"><span class="linenos">249</span></a><span class="sd">        &#39;strict&#39;, &#39;replace&#39;, &#39;backslashreplace&#39;, &#39;surrogateescape&#39;, and</span>
</span><span id="CodecOptions-250"><a href="#CodecOptions-250"><span class="linenos">250</span></a><span class="sd">        &#39;ignore&#39;. Defaults to &#39;strict&#39;.</span>
</span><span id="CodecOptions-251"><a href="#CodecOptions-251"><span class="linenos">251</span></a><span class="sd">      - `tzinfo`: A :class:`~datetime.tzinfo` subclass that specifies the</span>
</span><span id="CodecOptions-252"><a href="#CodecOptions-252"><span class="linenos">252</span></a><span class="sd">        timezone to/from which :class:`~datetime.datetime` objects should be</span>
</span><span id="CodecOptions-253"><a href="#CodecOptions-253"><span class="linenos">253</span></a><span class="sd">        encoded/decoded.</span>
</span><span id="CodecOptions-254"><a href="#CodecOptions-254"><span class="linenos">254</span></a><span class="sd">      - `type_registry`: Instance of :class:`TypeRegistry` used to customize</span>
</span><span id="CodecOptions-255"><a href="#CodecOptions-255"><span class="linenos">255</span></a><span class="sd">        encoding and decoding behavior.</span>
</span><span id="CodecOptions-256"><a href="#CodecOptions-256"><span class="linenos">256</span></a>
</span><span id="CodecOptions-257"><a href="#CodecOptions-257"><span class="linenos">257</span></a><span class="sd">    .. versionchanged:: 4.0</span>
</span><span id="CodecOptions-258"><a href="#CodecOptions-258"><span class="linenos">258</span></a><span class="sd">       The default for `uuid_representation` was changed from</span>
</span><span id="CodecOptions-259"><a href="#CodecOptions-259"><span class="linenos">259</span></a><span class="sd">       :const:`~bson.binary.UuidRepresentation.PYTHON_LEGACY` to</span>
</span><span id="CodecOptions-260"><a href="#CodecOptions-260"><span class="linenos">260</span></a><span class="sd">       :const:`~bson.binary.UuidRepresentation.UNSPECIFIED`.</span>
</span><span id="CodecOptions-261"><a href="#CodecOptions-261"><span class="linenos">261</span></a>
</span><span id="CodecOptions-262"><a href="#CodecOptions-262"><span class="linenos">262</span></a><span class="sd">    .. versionadded:: 3.8</span>
</span><span id="CodecOptions-263"><a href="#CodecOptions-263"><span class="linenos">263</span></a><span class="sd">       `type_registry` attribute.</span>
</span><span id="CodecOptions-264"><a href="#CodecOptions-264"><span class="linenos">264</span></a>
</span><span id="CodecOptions-265"><a href="#CodecOptions-265"><span class="linenos">265</span></a><span class="sd">    .. warning:: Care must be taken when changing</span>
</span><span id="CodecOptions-266"><a href="#CodecOptions-266"><span class="linenos">266</span></a><span class="sd">       `unicode_decode_error_handler` from its default value (&#39;strict&#39;).</span>
</span><span id="CodecOptions-267"><a href="#CodecOptions-267"><span class="linenos">267</span></a><span class="sd">       The &#39;replace&#39; and &#39;ignore&#39; modes should not be used when documents</span>
</span><span id="CodecOptions-268"><a href="#CodecOptions-268"><span class="linenos">268</span></a><span class="sd">       retrieved from the server will be modified in the client application</span>
</span><span id="CodecOptions-269"><a href="#CodecOptions-269"><span class="linenos">269</span></a><span class="sd">       and stored back to the server.</span>
</span><span id="CodecOptions-270"><a href="#CodecOptions-270"><span class="linenos">270</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CodecOptions-271"><a href="#CodecOptions-271"><span class="linenos">271</span></a>
</span><span id="CodecOptions-272"><a href="#CodecOptions-272"><span class="linenos">272</span></a>    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span>
</span><span id="CodecOptions-273"><a href="#CodecOptions-273"><span class="linenos">273</span></a>        <span class="bp">cls</span><span class="p">,</span>
</span><span id="CodecOptions-274"><a href="#CodecOptions-274"><span class="linenos">274</span></a>        <span class="n">document_class</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
</span><span id="CodecOptions-275"><a href="#CodecOptions-275"><span class="linenos">275</span></a>        <span class="n">tz_aware</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="CodecOptions-276"><a href="#CodecOptions-276"><span class="linenos">276</span></a>        <span class="n">uuid_representation</span><span class="o">=</span><span class="n">UuidRepresentation</span><span class="o">.</span><span class="n">UNSPECIFIED</span><span class="p">,</span>
</span><span id="CodecOptions-277"><a href="#CodecOptions-277"><span class="linenos">277</span></a>        <span class="n">unicode_decode_error_handler</span><span class="o">=</span><span class="s2">&quot;strict&quot;</span><span class="p">,</span>
</span><span id="CodecOptions-278"><a href="#CodecOptions-278"><span class="linenos">278</span></a>        <span class="n">tzinfo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="CodecOptions-279"><a href="#CodecOptions-279"><span class="linenos">279</span></a>        <span class="n">type_registry</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="CodecOptions-280"><a href="#CodecOptions-280"><span class="linenos">280</span></a>    <span class="p">):</span>
</span><span id="CodecOptions-281"><a href="#CodecOptions-281"><span class="linenos">281</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">document_class</span><span class="p">,</span> <span class="n">_MutableMapping</span><span class="p">)</span> <span class="ow">or</span> <span class="n">_raw_document_class</span><span class="p">(</span><span class="n">document_class</span><span class="p">)):</span>
</span><span id="CodecOptions-282"><a href="#CodecOptions-282"><span class="linenos">282</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CodecOptions-283"><a href="#CodecOptions-283"><span class="linenos">283</span></a>                <span class="s2">&quot;document_class must be dict, bson.son.SON, &quot;</span>
</span><span id="CodecOptions-284"><a href="#CodecOptions-284"><span class="linenos">284</span></a>                <span class="s2">&quot;bson.raw_bson.RawBSONDocument, or a &quot;</span>
</span><span id="CodecOptions-285"><a href="#CodecOptions-285"><span class="linenos">285</span></a>                <span class="s2">&quot;sublass of collections.abc.MutableMapping&quot;</span>
</span><span id="CodecOptions-286"><a href="#CodecOptions-286"><span class="linenos">286</span></a>            <span class="p">)</span>
</span><span id="CodecOptions-287"><a href="#CodecOptions-287"><span class="linenos">287</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tz_aware</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="CodecOptions-288"><a href="#CodecOptions-288"><span class="linenos">288</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;tz_aware must be True or False&quot;</span><span class="p">)</span>
</span><span id="CodecOptions-289"><a href="#CodecOptions-289"><span class="linenos">289</span></a>        <span class="k">if</span> <span class="n">uuid_representation</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ALL_UUID_REPRESENTATIONS</span><span class="p">:</span>
</span><span id="CodecOptions-290"><a href="#CodecOptions-290"><span class="linenos">290</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CodecOptions-291"><a href="#CodecOptions-291"><span class="linenos">291</span></a>                <span class="s2">&quot;uuid_representation must be a value &quot;</span> <span class="s2">&quot;from .binary.UuidRepresentation&quot;</span>
</span><span id="CodecOptions-292"><a href="#CodecOptions-292"><span class="linenos">292</span></a>            <span class="p">)</span>
</span><span id="CodecOptions-293"><a href="#CodecOptions-293"><span class="linenos">293</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">unicode_decode_error_handler</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
</span><span id="CodecOptions-294"><a href="#CodecOptions-294"><span class="linenos">294</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;unicode_decode_error_handler must be a string &quot;</span> <span class="s2">&quot;or None&quot;</span><span class="p">)</span>
</span><span id="CodecOptions-295"><a href="#CodecOptions-295"><span class="linenos">295</span></a>        <span class="k">if</span> <span class="n">tzinfo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CodecOptions-296"><a href="#CodecOptions-296"><span class="linenos">296</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">):</span>
</span><span id="CodecOptions-297"><a href="#CodecOptions-297"><span class="linenos">297</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;tzinfo must be an instance of datetime.tzinfo&quot;</span><span class="p">)</span>
</span><span id="CodecOptions-298"><a href="#CodecOptions-298"><span class="linenos">298</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">tz_aware</span><span class="p">:</span>
</span><span id="CodecOptions-299"><a href="#CodecOptions-299"><span class="linenos">299</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;cannot specify tzinfo without also setting tz_aware=True&quot;</span><span class="p">)</span>
</span><span id="CodecOptions-300"><a href="#CodecOptions-300"><span class="linenos">300</span></a>
</span><span id="CodecOptions-301"><a href="#CodecOptions-301"><span class="linenos">301</span></a>        <span class="n">type_registry</span> <span class="o">=</span> <span class="n">type_registry</span> <span class="ow">or</span> <span class="n">TypeRegistry</span><span class="p">()</span>
</span><span id="CodecOptions-302"><a href="#CodecOptions-302"><span class="linenos">302</span></a>
</span><span id="CodecOptions-303"><a href="#CodecOptions-303"><span class="linenos">303</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">type_registry</span><span class="p">,</span> <span class="n">TypeRegistry</span><span class="p">):</span>
</span><span id="CodecOptions-304"><a href="#CodecOptions-304"><span class="linenos">304</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;type_registry must be an instance of TypeRegistry&quot;</span><span class="p">)</span>
</span><span id="CodecOptions-305"><a href="#CodecOptions-305"><span class="linenos">305</span></a>
</span><span id="CodecOptions-306"><a href="#CodecOptions-306"><span class="linenos">306</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span>
</span><span id="CodecOptions-307"><a href="#CodecOptions-307"><span class="linenos">307</span></a>            <span class="bp">cls</span><span class="p">,</span>
</span><span id="CodecOptions-308"><a href="#CodecOptions-308"><span class="linenos">308</span></a>            <span class="p">(</span>
</span><span id="CodecOptions-309"><a href="#CodecOptions-309"><span class="linenos">309</span></a>                <span class="n">document_class</span><span class="p">,</span>
</span><span id="CodecOptions-310"><a href="#CodecOptions-310"><span class="linenos">310</span></a>                <span class="n">tz_aware</span><span class="p">,</span>
</span><span id="CodecOptions-311"><a href="#CodecOptions-311"><span class="linenos">311</span></a>                <span class="n">uuid_representation</span><span class="p">,</span>
</span><span id="CodecOptions-312"><a href="#CodecOptions-312"><span class="linenos">312</span></a>                <span class="n">unicode_decode_error_handler</span><span class="p">,</span>
</span><span id="CodecOptions-313"><a href="#CodecOptions-313"><span class="linenos">313</span></a>                <span class="n">tzinfo</span><span class="p">,</span>
</span><span id="CodecOptions-314"><a href="#CodecOptions-314"><span class="linenos">314</span></a>                <span class="n">type_registry</span><span class="p">,</span>
</span><span id="CodecOptions-315"><a href="#CodecOptions-315"><span class="linenos">315</span></a>            <span class="p">),</span>
</span><span id="CodecOptions-316"><a href="#CodecOptions-316"><span class="linenos">316</span></a>        <span class="p">)</span>
</span><span id="CodecOptions-317"><a href="#CodecOptions-317"><span class="linenos">317</span></a>
</span><span id="CodecOptions-318"><a href="#CodecOptions-318"><span class="linenos">318</span></a>    <span class="k">def</span> <span class="nf">_arguments_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CodecOptions-319"><a href="#CodecOptions-319"><span class="linenos">319</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Representation of the arguments used to create this object.&quot;&quot;&quot;</span>
</span><span id="CodecOptions-320"><a href="#CodecOptions-320"><span class="linenos">320</span></a>        <span class="n">document_class_repr</span> <span class="o">=</span> <span class="s2">&quot;dict&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">document_class</span> <span class="ow">is</span> <span class="nb">dict</span> <span class="k">else</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">document_class</span><span class="p">)</span>
</span><span id="CodecOptions-321"><a href="#CodecOptions-321"><span class="linenos">321</span></a>
</span><span id="CodecOptions-322"><a href="#CodecOptions-322"><span class="linenos">322</span></a>        <span class="n">uuid_rep_repr</span> <span class="o">=</span> <span class="n">UUID_REPRESENTATION_NAMES</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="CodecOptions-323"><a href="#CodecOptions-323"><span class="linenos">323</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">uuid_representation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">uuid_representation</span>
</span><span id="CodecOptions-324"><a href="#CodecOptions-324"><span class="linenos">324</span></a>        <span class="p">)</span>
</span><span id="CodecOptions-325"><a href="#CodecOptions-325"><span class="linenos">325</span></a>
</span><span id="CodecOptions-326"><a href="#CodecOptions-326"><span class="linenos">326</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="CodecOptions-327"><a href="#CodecOptions-327"><span class="linenos">327</span></a>            <span class="s2">&quot;document_class=</span><span class="si">%s</span><span class="s2">, tz_aware=</span><span class="si">%r</span><span class="s2">, uuid_representation=</span><span class="si">%s</span><span class="s2">, &quot;</span>
</span><span id="CodecOptions-328"><a href="#CodecOptions-328"><span class="linenos">328</span></a>            <span class="s2">&quot;unicode_decode_error_handler=</span><span class="si">%r</span><span class="s2">, tzinfo=</span><span class="si">%r</span><span class="s2">, &quot;</span>
</span><span id="CodecOptions-329"><a href="#CodecOptions-329"><span class="linenos">329</span></a>            <span class="s2">&quot;type_registry=</span><span class="si">%r</span><span class="s2">&quot;</span>
</span><span id="CodecOptions-330"><a href="#CodecOptions-330"><span class="linenos">330</span></a>            <span class="o">%</span> <span class="p">(</span>
</span><span id="CodecOptions-331"><a href="#CodecOptions-331"><span class="linenos">331</span></a>                <span class="n">document_class_repr</span><span class="p">,</span>
</span><span id="CodecOptions-332"><a href="#CodecOptions-332"><span class="linenos">332</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">tz_aware</span><span class="p">,</span>
</span><span id="CodecOptions-333"><a href="#CodecOptions-333"><span class="linenos">333</span></a>                <span class="n">uuid_rep_repr</span><span class="p">,</span>
</span><span id="CodecOptions-334"><a href="#CodecOptions-334"><span class="linenos">334</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">unicode_decode_error_handler</span><span class="p">,</span>
</span><span id="CodecOptions-335"><a href="#CodecOptions-335"><span class="linenos">335</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span>
</span><span id="CodecOptions-336"><a href="#CodecOptions-336"><span class="linenos">336</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">type_registry</span><span class="p">,</span>
</span><span id="CodecOptions-337"><a href="#CodecOptions-337"><span class="linenos">337</span></a>            <span class="p">)</span>
</span><span id="CodecOptions-338"><a href="#CodecOptions-338"><span class="linenos">338</span></a>        <span class="p">)</span>
</span><span id="CodecOptions-339"><a href="#CodecOptions-339"><span class="linenos">339</span></a>
</span><span id="CodecOptions-340"><a href="#CodecOptions-340"><span class="linenos">340</span></a>    <span class="k">def</span> <span class="nf">_options_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CodecOptions-341"><a href="#CodecOptions-341"><span class="linenos">341</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Dictionary of the arguments used to create this object.&quot;&quot;&quot;</span>
</span><span id="CodecOptions-342"><a href="#CodecOptions-342"><span class="linenos">342</span></a>        <span class="c1"># TODO: PYTHON-2442 use _asdict() instead</span>
</span><span id="CodecOptions-343"><a href="#CodecOptions-343"><span class="linenos">343</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="CodecOptions-344"><a href="#CodecOptions-344"><span class="linenos">344</span></a>            <span class="s2">&quot;document_class&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">document_class</span><span class="p">,</span>
</span><span id="CodecOptions-345"><a href="#CodecOptions-345"><span class="linenos">345</span></a>            <span class="s2">&quot;tz_aware&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tz_aware</span><span class="p">,</span>
</span><span id="CodecOptions-346"><a href="#CodecOptions-346"><span class="linenos">346</span></a>            <span class="s2">&quot;uuid_representation&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">uuid_representation</span><span class="p">,</span>
</span><span id="CodecOptions-347"><a href="#CodecOptions-347"><span class="linenos">347</span></a>            <span class="s2">&quot;unicode_decode_error_handler&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">unicode_decode_error_handler</span><span class="p">,</span>
</span><span id="CodecOptions-348"><a href="#CodecOptions-348"><span class="linenos">348</span></a>            <span class="s2">&quot;tzinfo&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span>
</span><span id="CodecOptions-349"><a href="#CodecOptions-349"><span class="linenos">349</span></a>            <span class="s2">&quot;type_registry&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_registry</span><span class="p">,</span>
</span><span id="CodecOptions-350"><a href="#CodecOptions-350"><span class="linenos">350</span></a>        <span class="p">}</span>
</span><span id="CodecOptions-351"><a href="#CodecOptions-351"><span class="linenos">351</span></a>
</span><span id="CodecOptions-352"><a href="#CodecOptions-352"><span class="linenos">352</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CodecOptions-353"><a href="#CodecOptions-353"><span class="linenos">353</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arguments_repr</span><span class="p">())</span>
</span><span id="CodecOptions-354"><a href="#CodecOptions-354"><span class="linenos">354</span></a>
</span><span id="CodecOptions-355"><a href="#CodecOptions-355"><span class="linenos">355</span></a>    <span class="k">def</span> <span class="nf">with_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="CodecOptions-356"><a href="#CodecOptions-356"><span class="linenos">356</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Make a copy of this CodecOptions, overriding some options::</span>
</span><span id="CodecOptions-357"><a href="#CodecOptions-357"><span class="linenos">357</span></a>
</span><span id="CodecOptions-358"><a href="#CodecOptions-358"><span class="linenos">358</span></a><span class="sd">            &gt;&gt;&gt; from .codec_options import DEFAULT_CODEC_OPTIONS</span>
</span><span id="CodecOptions-359"><a href="#CodecOptions-359"><span class="linenos">359</span></a><span class="sd">            &gt;&gt;&gt; DEFAULT_CODEC_OPTIONS.tz_aware</span>
</span><span id="CodecOptions-360"><a href="#CodecOptions-360"><span class="linenos">360</span></a><span class="sd">            False</span>
</span><span id="CodecOptions-361"><a href="#CodecOptions-361"><span class="linenos">361</span></a><span class="sd">            &gt;&gt;&gt; options = DEFAULT_CODEC_OPTIONS.with_options(tz_aware=True)</span>
</span><span id="CodecOptions-362"><a href="#CodecOptions-362"><span class="linenos">362</span></a><span class="sd">            &gt;&gt;&gt; options.tz_aware</span>
</span><span id="CodecOptions-363"><a href="#CodecOptions-363"><span class="linenos">363</span></a><span class="sd">            True</span>
</span><span id="CodecOptions-364"><a href="#CodecOptions-364"><span class="linenos">364</span></a>
</span><span id="CodecOptions-365"><a href="#CodecOptions-365"><span class="linenos">365</span></a><span class="sd">        .. versionadded:: 3.5</span>
</span><span id="CodecOptions-366"><a href="#CodecOptions-366"><span class="linenos">366</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CodecOptions-367"><a href="#CodecOptions-367"><span class="linenos">367</span></a>        <span class="n">opts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options_dict</span><span class="p">()</span>
</span><span id="CodecOptions-368"><a href="#CodecOptions-368"><span class="linenos">368</span></a>        <span class="n">opts</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="CodecOptions-369"><a href="#CodecOptions-369"><span class="linenos">369</span></a>        <span class="k">return</span> <span class="n">CodecOptions</span><span class="p">(</span><span class="o">**</span><span class="n">opts</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Encapsulates options used encoding and / or decoding BSON.</p>

<p>The <code><a href="#CodecOptions.document_class">document_class</a></code> option is used to define a custom type for use
decoding BSON documents. Access to the underlying raw BSON bytes for
a document is available using the <code>~bson.raw_bson.RawBSONDocument</code>
type::</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.raw_bson</span> <span class="kn">import</span> <span class="n">RawBSONDocument</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.codec_options</span> <span class="kn">import</span> <span class="n">CodecOptions</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">codec_options</span> <span class="o">=</span> <span class="n">CodecOptions</span><span class="p">(</span><span class="n">document_class</span><span class="o">=</span><span class="n">RawBSONDocument</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coll</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_collection</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">codec_options</span><span class="o">=</span><span class="n">codec_options</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doc</span> <span class="o">=</span> <span class="n">coll</span><span class="o">.</span><span class="n">find_one</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doc</span><span class="o">.</span><span class="n">raw</span>
<span class="go">&#39;\x16\x00\x00\x00\x07_id\x00[0\x165\x91\x10\xea\x14\xe8\xc5\x8b\x93\x00&#39;</span>
</code></pre>
</div>

<p>The document class can be any type that inherits from
<code>~collections.abc.MutableMapping</code>::</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">AttributeDict</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
<span class="gp">... </span>    <span class="c1"># A dict that supports attribute access.</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">codec_options</span> <span class="o">=</span> <span class="n">CodecOptions</span><span class="p">(</span><span class="n">document_class</span><span class="o">=</span><span class="n">AttributeDict</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coll</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_collection</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">codec_options</span><span class="o">=</span><span class="n">codec_options</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doc</span> <span class="o">=</span> <span class="n">coll</span><span class="o">.</span><span class="n">find_one</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doc</span><span class="o">.</span><span class="n">_id</span>
<span class="go">ObjectId(&#39;5b3016359110ea14e8c58b93&#39;)</span>
</code></pre>
</div>

<p>See :doc:<code>/examples/datetimes</code> for examples using the <code><a href="#CodecOptions.tz_aware">tz_aware</a></code> and
<code><a href="#CodecOptions.tzinfo">tzinfo</a></code> options.</p>

<p>See :doc:<code>examples/uuid</code> for examples using the <code><a href="#CodecOptions.uuid_representation">uuid_representation</a></code>
option.</p>

<p>:Parameters:</p>

<ul>
<li><code><a href="#CodecOptions.document_class">document_class</a></code>: BSON documents returned in queries will be decoded
to an instance of this class. Must be a subclass of
<code>~collections.abc.MutableMapping</code>. Defaults to <code>dict</code>.</li>
<li><code><a href="#CodecOptions.tz_aware">tz_aware</a></code>: If <code>True</code>, BSON datetimes will be decoded to timezone
aware instances of <code>~datetime.datetime</code>. Otherwise they will be
naive. Defaults to <code>False</code>.</li>
<li><code><a href="#CodecOptions.uuid_representation">uuid_representation</a></code>: The BSON representation to use when encoding
and decoding instances of <code>~uuid.UUID</code>. Defaults to
<code>~bson.binary.UuidRepresentation.UNSPECIFIED</code>. New
applications should consider setting this to
<code>~bson.binary.UuidRepresentation.STANDARD</code> for cross language
compatibility. See :ref:<code>handling-uuid-data-example</code> for details.</li>
<li><code><a href="#CodecOptions.unicode_decode_error_handler">unicode_decode_error_handler</a></code>: The error handler to apply when
a Unicode-related error occurs during BSON decoding that would
otherwise raise <code>UnicodeDecodeError</code>. Valid options include
'strict', 'replace', 'backslashreplace', 'surrogateescape', and
'ignore'. Defaults to 'strict'.</li>
<li><code><a href="#CodecOptions.tzinfo">tzinfo</a></code>: A <code>~datetime.tzinfo</code> subclass that specifies the
timezone to/from which <code>~datetime.datetime</code> objects should be
encoded/decoded.</li>
<li><code><a href="#CodecOptions.type_registry">type_registry</a></code>: Instance of <code><a href="#TypeRegistry">TypeRegistry</a></code> used to customize
encoding and decoding behavior.</li>
</ul>

<p><em>Changed in version 4.0:</em>
The default for <code><a href="#CodecOptions.uuid_representation">uuid_representation</a></code> was changed from
<code>~bson.binary.UuidRepresentation.PYTHON_LEGACY</code> to
<code>~bson.binary.UuidRepresentation.UNSPECIFIED</code>.</p>

<p><em>New in version 3.8:</em>
<code><a href="#CodecOptions.type_registry">type_registry</a></code> attribute.</p>

<div class="pdoc-alert pdoc-alert-warning">

<h6 id="care-must-be-taken-when-changing">Care must be taken when changing</h6>

<p><code><a href="#CodecOptions.unicode_decode_error_handler">unicode_decode_error_handler</a></code> from its default value ('strict').
The 'replace' and 'ignore' modes should not be used when documents
retrieved from the server will be modified in the client application
and stored back to the server.</p>

</div>
</div>


                            <div id="CodecOptions.with_options" class="classattr">
                                        <input id="CodecOptions.with_options-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">with_options</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CodecOptions.with_options-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CodecOptions.with_options"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CodecOptions.with_options-355"><a href="#CodecOptions.with_options-355"><span class="linenos">355</span></a>    <span class="k">def</span> <span class="nf">with_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="CodecOptions.with_options-356"><a href="#CodecOptions.with_options-356"><span class="linenos">356</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Make a copy of this CodecOptions, overriding some options::</span>
</span><span id="CodecOptions.with_options-357"><a href="#CodecOptions.with_options-357"><span class="linenos">357</span></a>
</span><span id="CodecOptions.with_options-358"><a href="#CodecOptions.with_options-358"><span class="linenos">358</span></a><span class="sd">            &gt;&gt;&gt; from .codec_options import DEFAULT_CODEC_OPTIONS</span>
</span><span id="CodecOptions.with_options-359"><a href="#CodecOptions.with_options-359"><span class="linenos">359</span></a><span class="sd">            &gt;&gt;&gt; DEFAULT_CODEC_OPTIONS.tz_aware</span>
</span><span id="CodecOptions.with_options-360"><a href="#CodecOptions.with_options-360"><span class="linenos">360</span></a><span class="sd">            False</span>
</span><span id="CodecOptions.with_options-361"><a href="#CodecOptions.with_options-361"><span class="linenos">361</span></a><span class="sd">            &gt;&gt;&gt; options = DEFAULT_CODEC_OPTIONS.with_options(tz_aware=True)</span>
</span><span id="CodecOptions.with_options-362"><a href="#CodecOptions.with_options-362"><span class="linenos">362</span></a><span class="sd">            &gt;&gt;&gt; options.tz_aware</span>
</span><span id="CodecOptions.with_options-363"><a href="#CodecOptions.with_options-363"><span class="linenos">363</span></a><span class="sd">            True</span>
</span><span id="CodecOptions.with_options-364"><a href="#CodecOptions.with_options-364"><span class="linenos">364</span></a>
</span><span id="CodecOptions.with_options-365"><a href="#CodecOptions.with_options-365"><span class="linenos">365</span></a><span class="sd">        .. versionadded:: 3.5</span>
</span><span id="CodecOptions.with_options-366"><a href="#CodecOptions.with_options-366"><span class="linenos">366</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CodecOptions.with_options-367"><a href="#CodecOptions.with_options-367"><span class="linenos">367</span></a>        <span class="n">opts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options_dict</span><span class="p">()</span>
</span><span id="CodecOptions.with_options-368"><a href="#CodecOptions.with_options-368"><span class="linenos">368</span></a>        <span class="n">opts</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="CodecOptions.with_options-369"><a href="#CodecOptions.with_options-369"><span class="linenos">369</span></a>        <span class="k">return</span> <span class="n">CodecOptions</span><span class="p">(</span><span class="o">**</span><span class="n">opts</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Make a copy of this CodecOptions, overriding some options::</p>

<pre><code>&gt;&gt;&gt; from .codec_options import DEFAULT_CODEC_OPTIONS
&gt;&gt;&gt; DEFAULT_CODEC_OPTIONS.tz_aware
False
&gt;&gt;&gt; options = DEFAULT_CODEC_OPTIONS.with_options(tz_aware=True)
&gt;&gt;&gt; options.tz_aware
True
</code></pre>

<p><em>New in version 3.5.</em></p>
</div>


                            </div>
                            <div id="CodecOptions.document_class" class="classattr">
                                <div class="attr variable">
            <span class="name">document_class</span>

        
    </div>
    <a class="headerlink" href="#CodecOptions.document_class"></a>
    
            <div class="docstring"><p>Alias for field number 0</p>
</div>


                            </div>
                            <div id="CodecOptions.tz_aware" class="classattr">
                                <div class="attr variable">
            <span class="name">tz_aware</span>

        
    </div>
    <a class="headerlink" href="#CodecOptions.tz_aware"></a>
    
            <div class="docstring"><p>Alias for field number 1</p>
</div>


                            </div>
                            <div id="CodecOptions.uuid_representation" class="classattr">
                                <div class="attr variable">
            <span class="name">uuid_representation</span>

        
    </div>
    <a class="headerlink" href="#CodecOptions.uuid_representation"></a>
    
            <div class="docstring"><p>Alias for field number 2</p>
</div>


                            </div>
                            <div id="CodecOptions.unicode_decode_error_handler" class="classattr">
                                <div class="attr variable">
            <span class="name">unicode_decode_error_handler</span>

        
    </div>
    <a class="headerlink" href="#CodecOptions.unicode_decode_error_handler"></a>
    
            <div class="docstring"><p>Alias for field number 3</p>
</div>


                            </div>
                            <div id="CodecOptions.tzinfo" class="classattr">
                                <div class="attr variable">
            <span class="name">tzinfo</span>

        
    </div>
    <a class="headerlink" href="#CodecOptions.tzinfo"></a>
    
            <div class="docstring"><p>Alias for field number 4</p>
</div>


                            </div>
                            <div id="CodecOptions.type_registry" class="classattr">
                                <div class="attr variable">
            <span class="name">type_registry</span>

        
    </div>
    <a class="headerlink" href="#CodecOptions.type_registry"></a>
    
            <div class="docstring"><p>Alias for field number 5</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>builtins.tuple</dt>
                                <dd id="CodecOptions.index" class="function">index</dd>
                <dd id="CodecOptions.count" class="function">count</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="DEFAULT_CODEC_OPTIONS">
                    <div class="attr variable">
            <span class="name">DEFAULT_CODEC_OPTIONS</span>        =
<input id="DEFAULT_CODEC_OPTIONS-view-value" class="view-value-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
            <label class="view-value-button pdoc-button" for="DEFAULT_CODEC_OPTIONS-view-value"></label><span class="default_value">CodecOptions(document_class=dict, tz_aware=False, uuid_representation=UuidRepresentation.UNSPECIFIED, unicode_decode_error_handler=&#39;strict&#39;, tzinfo=None, type_registry=TypeRegistry(type_codecs=[], fallback_encoder=None))</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_CODEC_OPTIONS"></a>
    
    

                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>